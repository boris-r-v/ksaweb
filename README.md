# Быстрый старт

Для работы в development-окружении должны быть установлены Node.js версии не ниже 8 (его удобно ставить при помощи [nvm](https://github.com/creationix/nvm)).

Установка зависимостей.

```
npm i
```

В проекте предусмотрены тесты, но до конца они не дописаны, так что если возникают, проблемы с установкой некоторых тяжелых пакетов (к примеру phantomjs), их можно удалить из `package.json`.

Для работы рекомендуется использовать редактор VS Code, он бесплатный и хорошо поддерживает современный
яваскрипт.

# Работа в development-окружении

Предусмотренно 2 режима работы в development-окружении: 

1. С mock-сервером
2. С прокси на ksa-контроллер

## Mock-сервер

Запускается при помощи команды

```
npm run mock
```

Сам mock-сервер написан на express.js и лежит в `./mocks/ksa/mockup.js`.
Он нужен для прототипирования вызовов API увязки с mpkweb или для
тестирования новых функций проекта в условиях, когда запустить 
ksa-контроллер не представляется возможным.

В текущем варианте он запускает Тыдыл и мигает в нем одним трафаретом.

## Прокси

Предположим у нас имеется работающий инстанс ksa-контроллера на `192.168.11.12:8001`. Тогда команда 

```
REMOTE=http://192.168.11.12:8001 npm run proxy
```

запустит на `localhost:8080` прокси-режим, в котором фронтэнд будет браться из проекта, а запросы к API перенаправляться на инстанс ksa-контроллера. 

Данный режим позволяет эффективно отлаживать фронтэнд без перезагрузки ksa-контроллера и вообще какого бы то ни было служебного доступа к нему (к примеру можно подключиться таким образом к работающему на объекте контроллеру). 

# Сборка production-версии

Сборка production-версии проекта осуществляется при помощи команды

```
npm run build
```

После успешной сборки production-версия окажется в каталоге `./dist`.

# По исходникам

Проект написан с использованием webix. В настоящее время данный фреймворк все более и более становится платным, однако бесплатную версию ребята сохраняют. Если в дальнейшем они начнут "наглеть" (это уже было пару раз, когда они в новых версиях перенесли мощные виджеты вроде мультиселекта в платную версию), то имеет смысл просто не обновляться до новых версий.

Все исходники лежат в `src`. Виджеты лежат в `src/widgets`. 

Data-plane по большей его части располагается в `src/apis/ksa.js`.

Адаптер xml-конфигов ksa, расположен в `src/formats/ksaxml.js`.

Что-то более подробное писать смысла особого нет, на сайте webix есть [Quick Start Guide](https://docs.webix.com/tutorials__quick_start.html), можно начать с него. Проект написан по образу и подобию того, что там описывается. Весь проект представляет собой набор виджетов, для нужд ksa, которые композируются способом, аналогичным как композируются стандартные компоненты webix.
